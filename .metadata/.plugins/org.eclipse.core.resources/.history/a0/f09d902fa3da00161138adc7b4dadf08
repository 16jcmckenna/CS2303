/*
 * PA1.c
 *
 *  Created on: Jan 14, 2017
 *      Author: Mitch Gaines
 */

#include <stdio.h>

int inputYear;


int getStartingDay (d, m, y) {

	//converts January and February to months of previous years as needed for algorithm
	if(m == 1){
		m = 13;
		y--;
	}
	else if(m == 2){
		m = 14;
		y--;
	}

	return (d + 2*m + 3*(m+1)/5 + y + y/4 - y/100 + y/400 + 2) % 7;
}

void printMonth(y, m, start_day) {
	printMonthName(y, m, start_day);
}

int leapYear(y) {
	if((y % 4 == 0) && (y % 100 != 0 || y % 400 == 0)){
		return 1;
	}
	return 0;
}

void printMonthName (y, m, start_day) {
	printf("\n\n");
	switch(m) {
	case 1:
		printf("January %i\n\n", y);
		printDays(31, start_day);
		break;
	case 2:
		printf("February %i\n\n", y);
		if(leapYear(y))
			printDays(29, start_day);
		else
			printDays(28, start_day);
		break;
	case 3:
		printf("March %i\n\n", y);
		printDays(31, start_day);
		break;
	case 4:
		printf("April %i\n\n", y);
		printDays(30, start_day);
		break;
	case 5:
		printf("May %i\n\n", y);
		printDays(31, start_day);
		break;
	case 6:
		printf("June %i\n\n", y);
		printDays(30, start_day);
		break;
	case 7:
		printf("July %i\n\n", y);
		printDays(31, start_day);
		break;
	case 8:
		printf("August %i\n\n", y);
		printDays(31, start_day);
		break;
	case 9:
		printf("September %i\n\n", y);
		printDays(30, start_day);
		break;
	case 10:
		printf("October %i\n\n", y);
		printDays(31, start_day);
		break;
	case 11:
		printf("November %i\n\n", y);
		printDays(30, start_day);
		break;
	case 12:
		printf("December %i\n\n", y);
		printDays(31, start_day);
		break;
	}
}


void printDays(val, start_day) {
	printf("Sun \t Mon \t Tue \t Wed \t Thu \t Fri \t Sat \n");
	int space = 0;
	for(int i = 0; i < start_day-1; i++) {
		printf("\t");
		space++;
	}
	for(int d = 1; d <= val; d++){
		printf("%4i \t", d);
		space++;
		if(space%7 == 0){
			printf("\n");
		}
	}
}

void printCalender(year, day) {
	for(int month = 1; month <= 12; month++) {
		printMonth(year, month, getStartingDay(1, month, year));
	}
}


int main (void) {
	printf("Monthly Calendar\nPlease enter year for this calendar: ");
	scanf("%i", &inputYear);

	printCalender(inputYear, getStartingDay(1,1,inputYear));

	return 0;
}


